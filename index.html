<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>What Should I Watch Next?</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>

  <!-- ======== Header ======== -->
  <header class="header">
    <div class="header-left">
      <span class="logo">ğŸ¯</span>
      <span class="site-title">What Should I Watch Next?</span>
    </div>
    <div class="header-right">
      <button id="sites-btn" class="header-btn" style="display:none" title="Browse Sites">
        ğŸŒ Sites
      </button>
      <button id="fav-panel-btn" class="header-btn" style="display:none" title="View Favorites">
        â¤ï¸ Favorites
      </button>
      <button id="custom-theme-btn" class="header-btn" title="Create Custom Theme">
        ğŸ¨ Mix
      </button>
      <select id="theme-select" class="theme-select">
        <option value="light">â˜€ï¸ Light</option>
        <option value="dark">ğŸŒ™ Dark</option>
        <option value="ocean">ğŸŒŠ Ocean</option>
        <option value="rose">ğŸŒ¸ RosÃ©</option>
        <option value="forest">ğŸŒ² Forest</option>
        <option value="sunset">ğŸŒ… Sunset</option>
        <option value="lavender">ğŸ’œ Lavender</option>
        <option value="midnight">ğŸŒŒ Midnight</option>
        <option value="cyberpunk">âš¡ Cyberpunk</option>
        <option value="candy">ğŸ¬ Candy</option>
        <option value="mono">â¬› Mono</option>
        <option value="custom">ğŸ¨ Customâ€¦</option>
      </select>
      <button id="profile-btn" class="header-btn profile-btn">
        <span>ğŸ‘¤ Log In</span>
      </button>
    </div>
  </header>

  <!-- ======== Welcome Banner (logged out) ======== -->
  <div id="welcome-banner" class="welcome-banner">
    <div class="welcome-emoji">ğŸ¬ğŸ“šğŸ“º</div>
    <div class="welcome-title">What Should I Watch Next?</div>
    <div class="welcome-desc">
      Add your favorite manga, books, TV shows, and movies â€” and we'll recommend more you'll love, plus tell you your favorite genre.
    </div>
    <button id="welcome-login-btn" class="btn btn-primary">ğŸš€ Get Started â€” Create a Profile</button>
  </div>

  <!-- ======== Main Content (logged in) ======== -->
  <main id="main-content" class="container hidden">

    <!-- Search -->
    <section class="section">
      <h2 class="section-title">ğŸ” Add Your Favorites</h2>
      <p class="section-subtitle">Search for manga, books, TV shows, or movies you love.</p>
      <div class="search-wrapper">
        <span class="search-icon">âŒ•</span>
        <input type="text" id="search-input" class="search-input" placeholder="Search for a title..." autocomplete="off" />
        <div id="search-results" class="search-results hidden"></div>
      </div>
    </section>

    <!-- Favorites -->
    <section class="section">
      <h2 class="section-title">
        â¤ï¸ Your Favorites
        <span id="fav-count" class="fav-count">0</span>
      </h2>
      <div class="cat-filters">
        <button class="cat-filter active" data-category="all">All</button>
        <button class="cat-filter" data-category="manga">ğŸ“š Manga</button>
        <button class="cat-filter" data-category="book">ğŸ“– Books</button>
        <button class="cat-filter" data-category="tv">ğŸ“º TV</button>
        <button class="cat-filter" data-category="movie">ğŸ¬ Movies</button>
      </div>
      <div id="favorites-empty" class="favorites-empty">
        Start typing above to search and add your favorite titles!
      </div>
      <div id="favorites-list" class="favorites-grid"></div>
    </section>

    <hr class="divider" />

    <!-- Results Section -->
    <div id="results-section" class="results-section hidden">

      <!-- Genre Profile -->
      <section class="section" id="genre-profile">
        <h2 class="section-title">ğŸ§¬ Your Genre Profile</h2>
        <div class="genre-profile-header">
          <span id="genre-profile-label" class="genre-profile-label"></span>
          <span id="top-genre-badge" class="top-genre-badge"></span>
        </div>
        <div id="genre-breakdown" class="genre-breakdown"></div>
      </section>

      <hr class="divider" />

      <!-- Recommendations -->
      <section class="section">
        <h2 class="section-title">âœ¨ Recommended For You</h2>
        <p class="section-subtitle">Based on the genres and themes in your favorites. Click the links to watch or read!</p>
        <div class="cat-filters">
          <button class="rec-cat-filter active" data-category="all">All</button>
          <button class="rec-cat-filter" data-category="manga">ğŸ“š Manga</button>
          <button class="rec-cat-filter" data-category="book">ğŸ“– Books</button>
          <button class="rec-cat-filter" data-category="tv">ğŸ“º TV</button>
          <button class="rec-cat-filter" data-category="movie">ğŸ¬ Movies</button>
        </div>
        <div id="recommendations-list" class="rec-grid"></div>
      </section>

      <hr class="divider" />

      <!-- Cross Recommendations -->
      <section id="cross-recs-section" class="cross-recs-section hidden">
        <h2 class="section-title">ğŸ”€ Try Something Different</h2>
        <p class="section-subtitle">Recommendations across different media types based on your taste.</p>
        <div id="cross-recs-list" class="cross-recs-grid"></div>
      </section>
    </div>
  </main>

  <!-- ======== Login / Profile Modal ======== -->
  <div id="login-overlay" class="modal-overlay">
    <div class="modal">
      <button id="login-close" class="modal-close">&times;</button>
      <div class="modal-title">ğŸ‘¤ Your Profile</div>

      <!-- Create new -->
      <div class="login-section">
        <div class="login-section-title">Create New Profile</div>
        <div class="login-form">
          <input type="text" id="profile-name-input" class="login-input" placeholder="Enter your nameâ€¦" maxlength="30" />

          <div class="login-section-title" style="margin-bottom:0.25rem; margin-top:0.25rem;">Pick an Avatar</div>
          <div class="avatar-picker">
            <div class="avatar-option selected" data-avatar="ğŸ˜Š">ğŸ˜Š</div>
            <div class="avatar-option" data-avatar="ğŸ˜">ğŸ˜</div>
            <div class="avatar-option" data-avatar="ğŸ¤“">ğŸ¤“</div>
            <div class="avatar-option" data-avatar="ğŸ¦Š">ğŸ¦Š</div>
            <div class="avatar-option" data-avatar="ğŸ±">ğŸ±</div>
            <div class="avatar-option" data-avatar="ğŸ‰">ğŸ‰</div>
            <div class="avatar-option" data-avatar="ğŸŒ¸">ğŸŒ¸</div>
            <div class="avatar-option" data-avatar="âš¡">âš¡</div>
            <div class="avatar-option" data-avatar="ğŸ®">ğŸ®</div>
            <div class="avatar-option" data-avatar="ğŸµ">ğŸµ</div>
            <div class="avatar-option" data-avatar="ğŸŒ™">ğŸŒ™</div>
            <div class="avatar-option" data-avatar="ğŸ”¥">ğŸ”¥</div>
            <div class="avatar-option" data-avatar="ğŸ’€">ğŸ’€</div>
            <div class="avatar-option" data-avatar="ğŸ„">ğŸ„</div>
            <div class="avatar-option" data-avatar="ğŸ¦‹">ğŸ¦‹</div>
            <div class="avatar-option" data-avatar="ğŸŒŠ">ğŸŒŠ</div>
            <div class="avatar-option" data-avatar="ğŸ­">ğŸ­</div>
            <div class="avatar-option" data-avatar="ğŸ§™">ğŸ§™</div>
            <div class="avatar-option" data-avatar="ğŸ§›">ğŸ§›</div>
            <div class="avatar-option" data-avatar="ğŸ§œ">ğŸ§œ</div>
            <div class="avatar-option" data-avatar="ğŸ¦„">ğŸ¦„</div>
            <div class="avatar-option" data-avatar="ğŸº">ğŸº</div>
            <div class="avatar-option" data-avatar="ğŸ¦ˆ">ğŸ¦ˆ</div>
            <div class="avatar-option" data-avatar="ğŸ§">ğŸ§</div>
            <div class="avatar-option" data-avatar="ğŸ¦‰">ğŸ¦‰</div>
            <div class="avatar-option" data-avatar="ğŸŒˆ">ğŸŒˆ</div>
            <div class="avatar-option" data-avatar="â­">â­</div>
            <div class="avatar-option" data-avatar="ğŸ¨">ğŸ¨</div>
            <div class="avatar-option" data-avatar="ğŸ†">ğŸ†</div>
            <div class="avatar-option" data-avatar="ğŸ’">ğŸ’</div>
            <div class="avatar-option" data-avatar="ğŸ•">ğŸ•</div>
            <div class="avatar-option" data-avatar="ğŸ¯">ğŸ¯</div>
          </div>

          <div class="login-section-title" style="margin-bottom:0.25rem; margin-top:0.75rem;">Or Upload a Profile Picture</div>
          <div class="profile-pic-upload">
            <label class="btn btn-outline btn-sm profile-pic-label" for="profile-pic-input">
              ğŸ“· Choose Photo
            </label>
            <input type="file" id="profile-pic-input" accept="image/*" class="profile-pic-file-input" />
            <button id="profile-pic-clear" class="btn btn-danger btn-sm hidden">âœ• Remove</button>
          </div>
          <div id="profile-pic-preview" class="profile-pic-preview hidden"></div>

          <button id="create-profile-btn" class="btn btn-primary">Create Profile</button>
        </div>
      </div>

      <!-- Existing profiles -->
      <div class="login-section">
        <div class="login-section-title">Switch Profile</div>
        <div id="profile-list" class="profile-list"></div>
      </div>

      <div class="login-actions">
        <button id="logout-btn" class="btn btn-outline btn-sm">ğŸšª Log Out</button>
      </div>
    </div>
  </div>

  <!-- ======== Custom Theme Modal ======== -->
  <div id="theme-overlay" class="modal-overlay">
    <div class="modal">
      <button id="theme-close" class="modal-close">&times;</button>
      <div class="modal-title">ğŸ¨ Custom Theme Builder</div>
      <p class="section-subtitle">Mix your own colors! Adjust the pickers and see a live preview below.</p>

      <div class="theme-builder-grid">
        <div class="theme-color-row">
          <span class="theme-color-label">Background</span>
          <input type="color" id="theme-bg" class="theme-color-input" value="#f8f9fa" />
          <span id="theme-hex-bg" class="theme-color-hex">#f8f9fa</span>
        </div>
        <div class="theme-color-row">
          <span class="theme-color-label">Card</span>
          <input type="color" id="theme-card" class="theme-color-input" value="#ffffff" />
          <span id="theme-hex-card" class="theme-color-hex">#ffffff</span>
        </div>
        <div class="theme-color-row">
          <span class="theme-color-label">Text</span>
          <input type="color" id="theme-text" class="theme-color-input" value="#1a1a2e" />
          <span id="theme-hex-text" class="theme-color-hex">#1a1a2e</span>
        </div>
        <div class="theme-color-row">
          <span class="theme-color-label">Accent</span>
          <input type="color" id="theme-accent" class="theme-color-input" value="#6366f1" />
          <span id="theme-hex-accent" class="theme-color-hex">#6366f1</span>
        </div>
        <div class="theme-color-row">
          <span class="theme-color-label">Border</span>
          <input type="color" id="theme-border" class="theme-color-input" value="#e5e7eb" />
          <span id="theme-hex-border" class="theme-color-hex">#e5e7eb</span>
        </div>
      </div>

      <!-- Live Preview -->
      <div id="theme-preview" class="theme-preview">
        <div class="theme-preview-title">Preview</div>
        <div>This is how your text will look.</div>
        <div class="theme-preview-card" style="padding:0.5rem;border:1px solid;border-radius:8px;">
          Card element preview
        </div>
        <div class="theme-preview-bar"></div>
      </div>

      <div style="display:flex;gap:0.5rem;margin-top:1rem;">
        <button id="theme-apply-btn" class="btn btn-primary btn-sm">âœ… Apply Theme</button>
      </div>

      <hr class="divider" />

      <div class="login-section-title">Save This Theme</div>
      <div class="theme-save-row">
        <input type="text" id="theme-save-name" class="theme-save-input" placeholder="Theme nameâ€¦" maxlength="20" />
        <button id="theme-save-btn" class="btn btn-outline btn-sm">ğŸ’¾ Save</button>
      </div>

      <div class="login-section-title" style="margin-top:1rem;">Your Saved Themes</div>
      <div id="saved-themes-list" class="saved-themes-list"></div>
    </div>
  </div>

  <!-- ======== Sites Directory Modal ======== -->
  <div id="sites-overlay" class="modal-overlay">
    <div class="modal modal-wide">
      <button id="sites-close" class="modal-close">&times;</button>
      <div class="modal-title">ğŸŒ Sites Directory</div>
      <p class="section-subtitle">Browse popular sites for manga, books, TV shows, and movies.</p>

      <div class="sites-grid">
        <!-- Manga Sites -->
        <div class="sites-category">
          <div class="sites-cat-title">ğŸ“š Manga & Anime</div>
          <a href="https://myanimelist.net" target="_blank" rel="noopener" class="site-card">
            <div class="site-card-name">MyAnimeList</div>
            <div class="site-card-desc">Track, rate, and discover anime & manga</div>
          </a>
          <a href="https://mangafire.to" target="_blank" rel="noopener" class="site-card">
            <div class="site-card-name">MangaFire</div>
            <div class="site-card-desc">Read manga online for free</div>
          </a>
          <a href="https://weebcentral.com" target="_blank" rel="noopener" class="site-card">
            <div class="site-card-name">WeebCentral</div>
            <div class="site-card-desc">Manga reading community & library</div>
          </a>
          <a href="https://www.crunchyroll.com" target="_blank" rel="noopener" class="site-card">
            <div class="site-card-name">Crunchyroll</div>
            <div class="site-card-desc">Stream anime, read manga</div>
          </a>
          <a href="https://mangadex.org" target="_blank" rel="noopener" class="site-card">
            <div class="site-card-name">MangaDex</div>
            <div class="site-card-desc">Fan-translated manga in many languages</div>
          </a>
          <a href="https://anilist.co" target="_blank" rel="noopener" class="site-card">
            <div class="site-card-name">AniList</div>
            <div class="site-card-desc">Track anime & manga with modern UI</div>
          </a>
        </div>

        <!-- Book Sites -->
        <div class="sites-category">
          <div class="sites-cat-title">ğŸ“– Books</div>
          <a href="https://www.goodreads.com" target="_blank" rel="noopener" class="site-card">
            <div class="site-card-name">Goodreads</div>
            <div class="site-card-desc">Discover & track your reading</div>
          </a>
          <a href="https://app.thestorygraph.com" target="_blank" rel="noopener" class="site-card">
            <div class="site-card-name">The StoryGraph</div>
            <div class="site-card-desc">Book tracking with mood & pace stats</div>
          </a>
          <a href="https://openlibrary.org" target="_blank" rel="noopener" class="site-card">
            <div class="site-card-name">Open Library</div>
            <div class="site-card-desc">Free digital library â€” borrow & read</div>
          </a>
          <a href="https://libbyapp.com" target="_blank" rel="noopener" class="site-card">
            <div class="site-card-name">Libby</div>
            <div class="site-card-desc">Borrow ebooks from your local library</div>
          </a>
          <a href="https://www.amazon.com/kindle-dbs/storefront" target="_blank" rel="noopener" class="site-card">
            <div class="site-card-name">Amazon Kindle</div>
            <div class="site-card-desc">Buy & read ebooks and audiobooks</div>
          </a>
          <a href="https://www.audible.com" target="_blank" rel="noopener" class="site-card">
            <div class="site-card-name">Audible</div>
            <div class="site-card-desc">Audiobooks & podcasts</div>
          </a>
        </div>

        <!-- TV Sites -->
        <div class="sites-category">
          <div class="sites-cat-title">ğŸ“º TV Shows</div>
          <a href="https://www.imdb.com" target="_blank" rel="noopener" class="site-card">
            <div class="site-card-name">IMDb</div>
            <div class="site-card-desc">Ratings, reviews & info for TV & film</div>
          </a>
          <a href="https://www.justwatch.com" target="_blank" rel="noopener" class="site-card">
            <div class="site-card-name">JustWatch</div>
            <div class="site-card-desc">Find where to stream any show</div>
          </a>
          <a href="https://trakt.tv" target="_blank" rel="noopener" class="site-card">
            <div class="site-card-name">Trakt</div>
            <div class="site-card-desc">Track your watching habits</div>
          </a>
          <a href="https://www.tvmaze.com" target="_blank" rel="noopener" class="site-card">
            <div class="site-card-name">TVMaze</div>
            <div class="site-card-desc">TV show schedule & episode guide</div>
          </a>
          <a href="https://www.netflix.com" target="_blank" rel="noopener" class="site-card">
            <div class="site-card-name">Netflix</div>
            <div class="site-card-desc">Stream TV shows and movies</div>
          </a>
          <a href="https://www.hulu.com" target="_blank" rel="noopener" class="site-card">
            <div class="site-card-name">Hulu</div>
            <div class="site-card-desc">Stream TV, originals & movies</div>
          </a>
        </div>

        <!-- Movie Sites -->
        <div class="sites-category">
          <div class="sites-cat-title">ğŸ¬ Movies</div>
          <a href="https://letterboxd.com" target="_blank" rel="noopener" class="site-card">
            <div class="site-card-name">Letterboxd</div>
            <div class="site-card-desc">Social film diary & reviews</div>
          </a>
          <a href="https://www.themoviedb.org" target="_blank" rel="noopener" class="site-card">
            <div class="site-card-name">TMDb</div>
            <div class="site-card-desc">Community movie & TV database</div>
          </a>
          <a href="https://www.rottentomatoes.com" target="_blank" rel="noopener" class="site-card">
            <div class="site-card-name">Rotten Tomatoes</div>
            <div class="site-card-desc">Critic & audience scores for movies</div>
          </a>
          <a href="https://www.disneyplus.com" target="_blank" rel="noopener" class="site-card">
            <div class="site-card-name">Disney+</div>
            <div class="site-card-desc">Disney, Marvel, Star Wars & more</div>
          </a>
          <a href="https://www.amazon.com/gp/video/storefront" target="_blank" rel="noopener" class="site-card">
            <div class="site-card-name">Prime Video</div>
            <div class="site-card-desc">Stream & rent movies</div>
          </a>
          <a href="https://www.max.com" target="_blank" rel="noopener" class="site-card">
            <div class="site-card-name">Max</div>
            <div class="site-card-desc">HBO, Warner Bros & more</div>
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- ======== Favorites Panel (sidebar) ======== -->
  <div id="fav-panel-overlay" class="fav-panel-overlay"></div>
  <aside id="fav-panel" class="fav-panel">
    <div class="fav-panel-header">
      <span class="fav-panel-title">â¤ï¸ Your Favorites</span>
      <button id="fav-panel-close" class="fav-panel-close">&times;</button>
    </div>
    <div id="fav-panel-body" class="fav-panel-body"></div>
    <div class="fav-panel-footer">
      <button id="fav-panel-export" class="btn btn-outline btn-sm">ğŸ“¤ Export Profile</button>
    </div>
  </aside>

  <!-- ======== Toast ======== -->
  <div id="toast-container" class="toast-container"></div>

  <!-- Scripts -->
  <script src="js/database.js"></script>
  <script src="js/recommendations.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/themes.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
